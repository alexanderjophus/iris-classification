protoc:
  version: 3.11.2
  # Does not allow unused imports
  allow_unused_imports: false
  includes:
    # note vendor is .gitignored
    - ../../vendor/github.com/grpc-ecosystem/grpc-gateway/third_party/googleapis

lint:
  rules:
    no_default: true
    add:
      - COMMENTS_NO_C_STYLE
      - ENUMS_HAVE_COMMENTS
      - ENUMS_NO_ALLOW_ALIAS
      - ENUM_FIELD_NAMES_UPPERCASE
      - ENUM_FIELD_NAMES_UPPER_SNAKE_CASE
      - ENUM_FIELD_PREFIXES
      - ENUM_NAMES_CAMEL_CASE
      - ENUM_NAMES_CAPITALIZED
      - ENUM_ZERO_VALUES_INVALID
      - FILE_OPTIONS_GO_PACKAGE_SAME_IN_DIR
      - FILE_OPTIONS_REQUIRE_GO_PACKAGE
      - MESSAGES_HAVE_COMMENTS
      - MESSAGES_HAVE_COMMENTS_EXCEPT_REQUEST_RESPONSE_TYPES
      - MESSAGE_FIELDS_NOT_FLOATS
      - MESSAGE_FIELD_NAMES_LOWERCASE
      - MESSAGE_FIELD_NAMES_LOWER_SNAKE_CASE
      - MESSAGE_NAMES_CAMEL_CASE
      - MESSAGE_NAMES_CAPITALIZED
      - ONEOF_NAMES_LOWER_SNAKE_CASE
      - PACKAGES_SAME_IN_DIR
      - PACKAGE_IS_DECLARED
      - PACKAGE_LOWER_SNAKE_CASE
      - RPCS_HAVE_COMMENTS
      - RPC_NAMES_CAMEL_CASE
      - RPC_NAMES_CAPITALIZED
      - SERVICES_HAVE_COMMENTS
      - SERVICE_NAMES_CAMEL_CASE
      - SERVICE_NAMES_CAPITALIZED
      - SYNTAX_PROTO3
      - WKT_DIRECTLY_IMPORTED
generate:
  go_options:
    import_path: github.com/trelore/iris-classification/proto/idl
    extra_modifiers:
      google/api/annotations.proto: google.golang.org/genproto/googleapis/api/annotations
      google/api/http.proto: google.golang.org/genproto/googleapis/api/annotations
  plugins:
    - name: go
      type: go
      flags: plugins=grpc
      output: ../gen/go
    - name: grpc-gateway
      type: go
      output: ../gen/go
